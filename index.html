<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sujeeth — Data Scientist (MS @ UMD)</title>

  <!-- AOS, Chart.js, PapaParse (for client demos) -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <style>
    :root{
      --bg:#f6f8fa; --card:#ffffff; --muted:#666; --accent:#07102a;
      --accent-2:#0b64c6; --glass: rgba(255,255,255,0.7);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:var(--bg);color:var(--accent);-webkit-font-smoothing:antialiased}
    header{padding:2rem 1rem;text-align:center;background:linear-gradient(90deg,#fff,#fbfbfb);border-bottom:1px solid #e6e9ee}
    header h1{margin:0;font-size:2rem;letter-spacing:0.2px}
    header p{margin:.4rem 0 0;color:var(--muted);font-weight:600}
    nav{display:flex;gap:.5rem;justify-content:center;padding:.7rem;background:#fff;border-bottom:1px solid #eee;position:sticky;top:0;z-index:30}
    nav a{display:inline-block;padding:.45rem .9rem;border-radius:999px;text-decoration:none;color:var(--accent);font-weight:700;font-size:.95rem}
    nav a:hover{background:var(--accent);color:#fff}
    .container{max-width:1100px;margin:2rem auto;padding:0 1rem}
    h2{font-size:1.05rem;margin:0 0 .6rem;padding-left:.5rem;border-left:4px solid var(--accent)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem}
    .card{background:var(--card);padding:1rem;border-radius:12px;box-shadow:0 6px 18px rgba(15,15,15,0.05);overflow:hidden;transition:transform .2s ease, box-shadow .2s ease}
    .card:hover{transform:translateY(-6px);box-shadow:0 14px 36px rgba(12,32,72,0.12)}
    .card .thumb{height:140px;border-radius:8px;background:#efefef;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .subtitle{color:var(--muted);font-size:.95rem;margin-top:.4rem}
    .btn{display:inline-block;padding:.48rem .9rem;border-radius:8px;background:var(--accent);color:#fff;text-decoration:none;font-weight:700;border:none;cursor:pointer}
    .muted{color:var(--muted)}
    footer{text-align:center;padding:2rem;color:var(--muted)}
    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);z-index:60;padding:1rem}
    .modal.open{display:flex}
    .modal-content{width:100%;max-width:1100px;background:#fff;padding:1rem;border-radius:12px;box-shadow:0 12px 50px rgba(0,0,0,0.25);max-height:90vh;overflow:auto}
    .close{float:right;cursor:pointer;border:none;background:transparent;font-size:18px}
    /* chat / demos */
    .chat{display:flex;flex-direction:column;gap:.5rem}
    .messages{height:260px;overflow:auto;padding:.75rem;border-radius:8px;border:1px solid #eee;background:#fafafa}
    .input-row{display:flex;gap:.5rem;margin-top:.5rem}
    input[type=text], textarea{flex:1;padding:.6rem;border-radius:8px;border:1px solid #ddd}
    input[type=file]{width:100%}
    /* mascot (anime girl) */
    .mascot-wrap{
      position:fixed; right:18px; bottom:18px; width:120px; height:140px; z-index:100; pointer-events:none;
      display:flex;align-items:flex-end;justify-content:center;transition:transform .08s linear;
    }
    .mascot{
      position:relative; width:100%; height:100%; transform-origin:center bottom;
      transition:transform .12s ease-out;
      filter: drop-shadow(0 8px 22px rgba(15,15,15,0.25));
    }
    .mascot img{width:100%; height:100%; object-fit:contain; border-radius:8px; display:block; pointer-events:auto}
    /* smile overlay (appears on hover of project) */
    .mascot .smile-badge{
      position:absolute; left:50%; transform:translateX(-50%); bottom:6px;
      background:linear-gradient(90deg,#fff8,#ffd); padding:.25rem .4rem; border-radius:12px; font-size:12px; display:flex;gap:.4rem; align-items:center;
      box-shadow:0 6px 18px rgba(0,0,0,0.12); opacity:0; transform-origin:center; transition:opacity .15s ease, transform .15s ease;
      pointer-events:none;
    }
    .mascot.happy .smile-badge{opacity:1; transform:translateX(-50%) translateY(-6px) scale(1.02)}
    .sparkle{width:12px;height:12px;border-radius:50%;background:linear-gradient(90deg,#fff,#ffd700);box-shadow:0 0 8px rgba(255,215,0,0.9)}
    /* skills badges */
    .skills{display:flex;gap:.5rem;flex-wrap:wrap}
    .skill{background:#f2f6ff;padding:.35rem .6rem;border-radius:999px;font-weight:700;color:var(--accent-2);font-size:.9rem}
    /* responsive */
    @media (max-width:760px){
      header h1{font-size:1.4rem}
      .mascot-wrap{width:86px;height:106px; right:12px; bottom:12px}
      nav{overflow:auto}
    }
  </style>
</head>
<body>
  <header>
    <h1>Sujeeth — Data Scientist (MS @ UMD)</h1>
    <p>Machine Learning · Time Series · NLP · MLOps · Data Engineering</p>
  </header>

  <nav>
    <a href="#about">About</a>
    <a href="#projects">Projects</a>
    <a href="#skills">Skills</a>
    <a href="#contact">Contact</a>
  </nav>

  <main class="container">
    <!-- About -->
    <section id="about" data-aos="fade-up">
      <h2>About</h2>
      <div class="card">
        <p>I am a Master's student in Data Science at University of Maryland (UMD College Park), with a background in Instrumentation & Control. I build reproducible data pipelines and production-ready ML systems — from data ingestion (ETL) to model training, validation, and deployment. I enjoy working on time-series forecasting, NLP, anomaly detection, and RL-driven control systems.</p>
        <p class="subtitle"><strong>Current:</strong> MS in Data Science, UMD (expected graduation: 2026). <strong>Email:</strong> <a href="mailto:sujeethsukumar@gmail.com">sujeethsukumar@gmail.com</a></p>
      </div>
    </section>

    <!-- Projects -->
    <section id="projects" data-aos="fade-up" style="margin-top:1.2rem">
      <h2>Featured Data Science Projects</h2>
      <div class="grid" id="projectGrid">

        <!-- Project 1: Finance Chatbot -->
        <article class="card project-card" data-project="finance" data-tags="NLP,RAG,Python" tabindex="0">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">Finance Chatbot (NLP + RAG)</h3>
            <div style="display:flex;gap:.5rem">
              <a class="btn" href="#" title="Open demo" data-open-modal="financeModal">Demo</a>
              <a class="btn" href="https://github.com/yourusername/finance-chatbot" target="_blank" style="background:var(--accent-2)">GitHub</a>
            </div>
          </div>
          <p class="subtitle">Upload transactions, extract patterns, and answer natural-language questions about spending. Demo uses client-side parsing with optional LLM backend integration (instructions in repo).</p>
        </article>

        <!-- Project 2: Stock Predictor -->
        <article class="card project-card" data-project="stock" data-tags="TimeSeries,LSTM,Python" tabindex="0">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">Stock Price Predictor (LSTM)</h3>
            <div style="display:flex;gap:.5rem">
              <a class="btn" href="#" data-open-modal="stockModal">Demo</a>
              <a class="btn" href="https://github.com/yourusername/stock-predictor" target="_blank" style="background:var(--accent-2)">GitHub</a>
            </div>
          </div>
          <p class="subtitle">End-to-end LSTM training notebook + inference script. This demo shows a simple client-side predictor and the full repo includes a reproducible TF training notebook.</p>
        </article>

        <!-- Project 3: Customer Segmentation -->
        <article class="card project-card" data-project="seg" data-tags="Clustering,RFM,Python" tabindex="0">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">Customer Segmentation (K-Means)</h3>
            <div style="display:flex;gap:.5rem">
              <a class="btn" href="#" data-open-modal="segModal">Demo</a>
              <a class="btn" href="https://github.com/yourusername/customer-segmentation" target="_blank" style="background:var(--accent-2)">GitHub</a>
            </div>
          </div>
          <p class="subtitle">RFM-based pipeline with normalization and cluster validation. Repo includes Jupyter notebook and tips for productionizing clustering (Pipelines, versioning).</p>
        </article>

        <!-- Project 4: Fraud Detection -->
        <article class="card project-card" data-project="fraud" data-tags="Anomaly,IsolationForest,Python" tabindex="0">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">Fraud Detection (Isolation Forest)</h3>
            <div style="display:flex;gap:.5rem">
              <a class="btn" href="#" data-open-modal="fraudModal">Demo</a>
              <a class="btn" href="https://github.com/yourusername/fraud-detection" target="_blank" style="background:var(--accent-2)">GitHub</a>
            </div>
          </div>
          <p class="subtitle">Anomaly detection baseline with feature engineering + isolation forest. Includes example pipeline and evaluation notebook.</p>
        </article>

        <!-- Project 5: Resume Classifier -->
        <article class="card project-card" data-project="resume" data-tags="NLP,BERT,Deployment" tabindex="0">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">Resume Classifier (BERT)</h3>
            <div style="display:flex;gap:.5rem">
              <a class="btn" href="#" data-open-modal="resumeModal">Demo</a>
              <a class="btn" href="https://github.com/yourusername/resume-classifier" target="_blank" style="background:var(--accent-2)">GitHub</a>
            </div>
          </div>
          <p class="subtitle">Resume categorization using fine-tuned transformer models. Repo includes training scripts, inference API (FastAPI), and deployment notes.</p>
        </article>

        <!-- Project 6: Time-Series Anomaly -->
        <article class="card project-card" data-project="ts" data-tags="TimeSeries,STL,Arima" tabindex="0">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">Time-Series Anomaly Detection</h3>
            <div style="display:flex;gap:.5rem">
              <a class="btn" href="#" data-open-modal="tsModal">Demo</a>
              <a class="btn" href="https://github.com/yourusername/time-series-anomaly" target="_blank" style="background:var(--accent-2)">GitHub</a>
            </div>
          </div>
          <p class="subtitle">Seasonal decomposition + rolling z-score detection. Notebook available for STL decomposition, ARIMA baseline, and evaluation metrics.</p>
        </article>

        <!-- Project 7: RL Tank (compact) -->
        <article class="card project-card" data-project="rl" data-tags="Reinforcement,Simulation,Visualization" tabindex="0">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 style="margin:0">RL Tank Controller</h3>
            <div style="display:flex;gap:.5rem">
              <a class="btn" href="#" data-open-modal="rlModal">Demo</a>
              <a class="btn" href="https://github.com/yourusername/rl-tank" target="_blank" style="background:var(--accent-2)">GitHub</a>
            </div>
          </div>
          <p class="subtitle">Q-learning agent controlling a tank-level. Demonstrates simulation → agent → visualization loop and model export for deployment.</p>
        </article>

      </div>
    </section>

    <!-- Skills -->
    <section id="skills" data-aos="fade-up" style="margin-top:1.2rem">
      <h2>Skills & Tools</h2>
      <div class="card">
        <div style="display:flex;gap:2rem;flex-wrap:wrap">
          <div style="flex:1;min-width:220px">
            <h4 style="margin:.2rem 0">Machine Learning & AI</h4>
            <div class="skills">
              <div class="skill">Supervised Learning</div>
              <div class="skill">Deep Learning</div>
              <div class="skill">NLP / Transformers</div>
              <div class="skill">Time-series</div>
            </div>
          </div>
          <div style="flex:1;min-width:220px">
            <h4 style="margin:.2rem 0">Engineering & Deployment</h4>
            <div class="skills">
              <div class="skill">Python</div>
              <div class="skill">Docker</div>
              <div class="skill">FastAPI</div>
              <div class="skill">CI/CD</div>
            </div>
          </div>
          <div style="flex:1;min-width:220px">
            <h4 style="margin:.2rem 0">Data & Visualization</h4>
            <div class="skills">
              <div class="skill">Pandas</div>
              <div class="skill">SQL</div>
              <div class="skill">Charting (Matplotlib/Plotly)</div>
              <div class="skill">Tableau / Dash</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" data-aos="fade-up" style="margin-top:1.2rem">
      <h2>Contact</h2>
      <div class="card">
        <p class="subtitle">I’m open to internships and full-time opportunities. Recruiters: please email me — <a href="mailto:sujeethsukumar@gmail.com">sujeethsukumar@gmail.com</a></p>
        <p style="margin-top:.6rem"><a class="btn" href="/assets/Sujeeth_Resume.pdf" download>Download Resume</a> <a class="btn" href="https://www.linkedin.com/in/yourprofile" target="_blank" style="background:var(--accent-2)">LinkedIn</a></p>
      </div>
    </section>

    <footer style="margin-top:2rem">© 2025 Sujeeth — Data Science Portfolio (UMD)</footer>
  </main>

  <!-- Mascot (uses the image you provided at the local path) -->
  <div class="mascot-wrap" id="mascotWrap" aria-hidden="true">
    <div class="mascot" id="mascot">
      <!-- IMPORTANT: this src points to your uploaded image path -->
      <img id="mascotImg" src= "A_2D_digital_illustration_features_Anya_Forger_fro.png" alt="mascot" />
      <!-- smile badge that appears when a project is hovered -->
      <div class="smile-badge">
        <div class="sparkle" aria-hidden="true"></div>
        <div style="font-weight:800;color:#333">Nice!</div>
      </div>
    </div>
  </div>

  <!-- ---------- MODALS (DEMO UIs) ----------
       For brevity these are compact versions of the demos implemented earlier.
       They are functional and client-side (CSV upload + basic visualization).
  -->
  <!-- Finance Modal -->
  <div id="financeModal" class="modal" aria-hidden>
    <div class="modal-content">
      <button class="close" data-close-modal aria-label="Close">✕</button>
      <h3>Finance Chatbot — Upload transactions.csv</h3>
      <div style="display:flex;gap:1rem;flex-wrap:wrap">
        <div style="flex:1;min-width:260px">
          <input id="fileInput" type="file" accept=".csv" />
          <p class="subtitle">CSV columns: Date,Merchant,Amount,Description</p>
          <canvas id="spendChart" style="width:100%;height:260px"></canvas>
        </div>
        <div style="flex:1;min-width:260px">
          <div class="card chat">
            <div id="messages" class="messages"></div>
            <div class="input-row">
              <input id="userQuery" type="text" placeholder="Ask: 'Top categories this month?'" />
              <button class="btn" id="askBtn">Ask</button>
            </div>
            <p class="muted" style="margin-top:.5rem">To enable real LLM answers deploy the server function and replace the endpoint in the console instructions.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Stock Modal -->
  <div id="stockModal" class="modal" aria-hidden>
    <div class="modal-content">
      <button class="close" data-close-modal aria-label="Close">✕</button>
      <h3>Stock Price Predictor (Demo)</h3>
      <div style="display:flex;gap:1rem;flex-wrap:wrap">
        <div style="flex:1;min-width:320px">
          <input id="stockFile" type="file" accept=".csv" />
          <p class="subtitle">CSV: Date,Open,High,Low,Close,Volume</p>
          <canvas id="stockChart" style="width:100%;height:320px"></canvas>
        </div>
        <div style="flex:1;min-width:320px">
          <div class="card">
            <label>MA window<input id="maWindow" type="number" value="7" style="width:70px;margin-left:.4rem"></label><br/><br/>
            <label>Horizon<input id="horizon" type="number" value="7" style="width:70px;margin-left:.4rem"></label>
            <div style="margin-top:.6rem"><button class="btn" id="predictBtn">Predict</button></div>
            <p class="muted" style="margin-top:.5rem">Full LSTM notebooks are in the GitHub repo linked on the project card.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Segmentation Modal -->
  <div id="segModal" class="modal" aria-hidden>
    <div class="modal-content">
      <button class="close" data-close-modal aria-label="Close">✕</button>
      <h3>Customer Segmentation (Demo)</h3>
      <div style="display:flex;gap:1rem;flex-wrap:wrap">
        <div style="flex:1;min-width:320px">
          <input id="segFile" type="file" accept=".csv" />
          <p class="subtitle">CSV: CustomerID,Recency,Frequency,Monetary</p>
          <canvas id="segChart" style="width:100%;height:320px"></canvas>
        </div>
        <div style="flex:1;min-width:320px">
          <div class="card">
            <label>Clusters<input id="kClusters" type="number" value="3" style="width:70px;margin-left:.4rem"></label>
            <div style="margin-top:.6rem"><button class="btn" id="segBtn">Cluster</button></div>
            <p class="muted" style="margin-top:.5rem">Try the notebook for feature scaling, silhouette scores and interpretation.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Fraud Modal -->
  <div id="fraudModal" class="modal" aria-hidden>
    <div class="modal-content">
      <button class="close" data-close-modal aria-label="Close">✕</button>
      <h3>Fraud Detection — Demo</h3>
      <div style="display:flex;gap:1rem;flex-wrap:wrap">
        <div style="flex:1;min-width:320px">
          <input id="fraudFile" type="file" accept=".csv" />
          <p class="subtitle">CSV: Date,Merchant,Amount,Description</p>
          <canvas id="fraudChart" style="width:100%;height:320px"></canvas>
        </div>
        <div style="flex:1;min-width:320px">
          <div class="card">
            <label>z-threshold<input id="zThresh" type="number" value="3" step="0.1" style="width:70px;margin-left:.4rem"></label>
            <div style="margin-top:.6rem"><button class="btn" id="fraudBtn">Detect</button></div>
            <div id="fraudList" style="margin-top:.6rem;max-height:160px;overflow:auto"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Resume Modal -->
  <div id="resumeModal" class="modal" aria-hidden>
    <div class="modal-content">
      <button class="close" data-close-modal aria-label="Close">✕</button>
      <h3>Resume Classifier (Demo)</h3>
      <div style="display:flex;gap:1rem;flex-wrap:wrap">
        <div style="flex:1;min-width:320px">
          <textarea id="resumeText" placeholder="Paste resume text here" rows="10"></textarea>
        </div>
        <div style="flex:1;min-width:320px">
          <div class="card">
            <div style="margin-top:.6rem"><button class="btn" id="classifyBtn">Classify</button></div>
            <div id="resumeOut" style="margin-top:.6rem"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Time-series Modal -->
  <div id="tsModal" class="modal" aria-hidden>
    <div class="modal-content">
      <button class="close" data-close-modal aria-label="Close">✕</button>
      <h3>Time-Series Anomaly (Demo)</h3>
      <div style="display:flex;gap:1rem;flex-wrap:wrap">
        <div style="flex:1;min-width:320px">
          <input id="tsFile" type="file" accept=".csv" />
          <p class="subtitle">CSV: Date,Value</p>
          <canvas id="tsChart" style="width:100%;height:320px"></canvas>
        </div>
        <div style="flex:1;min-width:320px">
          <div class="card">
            <label>window<input id="tsWindow" type="number" value="30" style="width:80px;margin-left:.4rem"></label><br/><br/>
            <label>z<input id="tsZ" type="number" value="3" step="0.1" style="width:80px;margin-left:.4rem"></label>
            <div style="margin-top:.6rem"><button class="btn" id="tsBtn">Detect</button></div>
            <div id="tsList" style="margin-top:.6rem;max-height:160px;overflow:auto"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- RL Modal -->
  <div id="rlModal" class="modal" aria-hidden>
    <div class="modal-content">
      <button class="close" data-close-modal aria-label="Close">✕</button>
      <h3>RL Tank — Demo</h3>
      <div style="display:flex;gap:1rem;flex-wrap:wrap">
        <div style="flex:1;min-width:320px">
          <canvas id="tankCanvas" style="width:100%;height:220px;background:linear-gradient(#dff,#fff);border-radius:8px"></canvas>
        </div>
        <div style="flex:1;min-width:320px">
          <div class="card">
            <div class="controls">
              <label>Episodes<input id="episodes" type="number" value="200" style="width:80px;margin-left:.4rem"></label>
              <label>α<input id="alpha" type="number" value="0.1" step="0.01" style="width:70px;margin-left:.4rem"></label>
              <label>γ<input id="gamma" type="number" value="0.95" step="0.01" style="width:70px;margin-left:.4rem"></label>
              <label>ε<input id="epsilon" type="number" value="0.2" step="0.01" style="width:70px;margin-left:.4rem"></label>
            </div>
            <div style="margin-top:.6rem"><button class="btn" id="trainBtn">Train</button></div>
            <canvas id="rewardChart" style="width:100%;height:160px;margin-top:.6rem"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script>
    // Init AOS
    document.addEventListener('DOMContentLoaded', ()=>{ AOS.init(); });

    // Modal open/close delegation
    document.querySelectorAll('[data-open-modal]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-open-modal');
        document.getElementById(id).classList.add('open');
      });
    });
    document.querySelectorAll('[data-close-modal]').forEach(btn=>{
      btn.addEventListener('click', ()=> btn.closest('.modal').classList.remove('open'));
    });
    document.querySelectorAll('.modal').forEach(m=>{
      m.addEventListener('click', (e)=>{ if(e.target===m) m.classList.remove('open'); });
    });

    // ---------- Mascot mouse tracking + hover smile logic ----------
    (function(){
      const mascotWrap = document.getElementById('mascotWrap');
      const mascot = document.getElementById('mascot');
      const mascotImg = document.getElementById('mascotImg');
      // pointer-events: none on wrapper. To allow hover triggering from project cards,
      // we'll toggle a "happy" class on the mascot when project-card gets hovered.
      // Mousemove -> rotate mascot slightly toward cursor.
      document.addEventListener('mousemove', (e)=>{
        // find center of mascot on page
        const rect = mascotWrap.getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top + rect.height/2;
        const dx = e.clientX - cx;
        const dy = e.clientY - cy;
        // compute angle in degrees for subtle tilt
        const angle = Math.atan2(dy, dx) * (180/Math.PI);
        const maxTilt = 14; // degrees limit
        const tilt = Math.max(-maxTilt, Math.min(maxTilt, angle/8));
        const moveX = Math.max(-12, Math.min(12, dx/20));
        const moveY = Math.max(-8, Math.min(8, dy/30));
        mascot.style.transform = `translate3d(${moveX}px, ${moveY}px, 0) rotate(${tilt}deg)`;
      });

      // Add / remove happy state when project card hovered
      document.querySelectorAll('.project-card').forEach(card=>{
        card.addEventListener('mouseenter', ()=> mascot.classList.add('happy'));
        card.addEventListener('mouseleave', ()=> mascot.classList.remove('happy'));
        // keyboard accessibility: focus also triggers
        card.addEventListener('focus', ()=> mascot.classList.add('happy'));
        card.addEventListener('blur', ()=> mascot.classList.remove('happy'));
      });
    })();

    // ---------- Simple client-side demos (CSV parsing & charts) ----------
    // Finance Chatbot (client-only fallback)
    (function(){
      let transactions = [];
      const fileInput = document.getElementById('fileInput');
      const spendCanvas = document.getElementById('spendChart');
      const messagesBox = document.getElementById('messages');
      const userQuery = document.getElementById('userQuery');
      const askBtn = document.getElementById('askBtn');

      function addMessage(role, text){
        const el = document.createElement('div');
        el.style.marginBottom = '8px';
        el.innerHTML = (role==='user'?'<b>You:</b> ':'<b>Bot:</b> ') + text;
        messagesBox.appendChild(el);
        messagesBox.scrollTop = messagesBox.scrollHeight;
      }

      function categorizeText(text){
        const categories = {Food:['restaurant','cafe','coffee','mcdonald','burger','pizza','starbucks'],Groceries:['supermarket','grocery','walmart','target','wholefoods'],Transport:['uber','lyft','metro','bus','taxi','fuel','gas'],Entertainment:['netflix','spotify','movie','cinema'],Shopping:['amazon','mall','clothes','nike','adidas'],Bills:['electric','water','internet','phone','rent']};
        text = (text||'').toLowerCase();
        for(const k in categories) for(const kw of categories[k]) if(text.includes(kw)) return k;
        return 'Other';
      }

      let spendChart = null;
      function renderChart(){
        if(!transactions.length) return;
        const grouped = {};
        transactions.forEach(t=>{
          const m = new Date(t.Date);
          if(isNaN(m)) return;
          const month = m.getFullYear() + '-' + String(m.getMonth()+1).padStart(2,'0');
          const cat = categorizeText(t.Merchant + ' ' + t.Description);
          grouped[month] = grouped[month] || {};
          grouped[month][cat] = (grouped[month][cat] || 0) + Math.abs(t.Amount || 0);
        });
        const months = Object.keys(grouped).sort();
        const cats = [...new Set([].concat(...months.map(m=>Object.keys(grouped[m]))))];
        const datasets = cats.map((c,idx)=>({label:c,data:months.map(m=>grouped[m][c]||0),backgroundColor: 'rgba(11,100,198,'+(0.12+idx*0.06)+')'}));
        const ctx = spendCanvas.getContext('2d');
        if(spendChart) spendChart.destroy();
        spendChart = new Chart(ctx,{type:'bar',data:{labels:months,datasets:datasets},options:{responsive:true,plugins:{legend:{position:'bottom'}},scales:{x:{stacked:true},y:{stacked:true}}}});
      }

      fileInput && fileInput.addEventListener('change', (e)=>{
        const f = e.target.files[0]; if(!f) return;
        Papa.parse(f, {header:true,skipEmptyLines:true,complete: function(res){
          transactions = res.data.map(r=>({Date:r.Date, Merchant:r.Merchant||'', Amount:parseFloat(r.Amount||0)||0, Description:r.Description||''}));
          renderChart();
          addMessage('bot', 'CSV loaded — ' + transactions.length + ' rows');
        }});
      });

      async function askBotHandler(){
        const q=(userQuery.value||'').trim(); if(!q) return;
        addMessage('user',q);
        if(!transactions.length){ addMessage('bot','Upload transactions.csv first.'); return; }
        const sums = {};
        transactions.forEach(t=>{ const cat = categorizeText(t.Merchant+' '+t.Description); sums[cat]=(sums[cat]||0)+Math.abs(t.Amount||0); });
        const largest = Object.entries(sums).sort((a,b)=>b[1]-a[1])[0] || ['None',0];
        addMessage('bot', `Top category: ${largest[0]} ($${(largest[1]||0).toFixed(2)}). Suggestion: review subscriptions and month-over-month trend.`);
      }

      askBtn && askBtn.addEventListener('click', askBotHandler);
      userQuery && userQuery.addEventListener('keydown', (e)=>{ if(e.key==='Enter') askBotHandler(); });
    })();

    // ---------- Stock predictor (simple client-side) ----------
    (function(){
      let stockData = [], stockChart = null;
      const stockFile = document.getElementById('stockFile');
      const stockCanvas = document.getElementById('stockChart');

      stockFile && stockFile.addEventListener('change', (e)=>{
        const f = e.target.files[0]; if(!f) return;
        Papa.parse(f, {header:true,skipEmptyLines:true,complete:function(res){
          stockData = res.data.map(r=>({Date: new Date(r.Date), Close: parseFloat(r.Close||r.close||r['Adj Close']||r['AdjClose']||0)})).filter(d=>!isNaN(d.Date) && !isNaN(d.Close));
          renderStock();
        }});
      });

      function renderStock(forecast){
        if(!stockData.length) return;
        const labels = stockData.map(d=>d.Date.toISOString().slice(0,10));
        const close = stockData.map(d=>d.Close);
        const ctx = stockCanvas.getContext('2d');
        const datasets = [{label:'Close',data:close,fill:false}];
        if(forecast) datasets.push({label:'Forecast',data:forecast,fill:false,borderDash:[6,4]});
        if(stockChart) stockChart.destroy();
        stockChart = new Chart(ctx,{type:'line',data:{labels, datasets},options:{responsive:true,plugins:{legend:{position:'bottom'}}}});
      }

      function linearPredict(series, horizon){
        const n = series.length;
        const x = Array.from({length:n}, (_,i)=>i);
        const y = series.slice();
        const xm = x.reduce((a,b)=>a+b,0)/n;
        const ym = y.reduce((a,b)=>a+b,0)/n;
        let num=0,den=0;
        for(let i=0;i<n;i++){ num += (x[i]-xm)*(y[i]-ym); den += (x[i]-xm)*(x[i]-xm); }
        const slope = den===0?0:num/den; const intercept = ym - slope*xm;
        const out = [];
        for(let h=1; h<=horizon; h++) out.push(intercept + slope*(n-1+h));
        return out;
      }

      document.getElementById('predictBtn') && document.getElementById('predictBtn').addEventListener('click', ()=>{
        const ma = parseInt(document.getElementById('maWindow').value)||7;
        const horizon = parseInt(document.getElementById('horizon').value)||7;
        if(!stockData.length) return alert('Upload a stock CSV with Close column');
        const closes = stockData.map(d=>d.Close);
        // moving average smoothing
        const maSeries = closes.map((v,i,arr)=> (i<ma ? (arr.slice(0,i+1).reduce((a,b)=>a+b,0)/(i+1)) : arr.slice(i-ma+1,i+1).reduce((a,b)=>a+b,0)/ma ));
        const lin = linearPredict(maSeries.slice(-Math.min(60,maSeries.length)), horizon);
        renderStock(lin);
      });
    })();

    // ---------- K-means segmentation (simple) ----------
    (function(){
      let segData = [], segChart = null;
      const segFile = document.getElementById('segFile');
      segFile && segFile.addEventListener('change', (e)=>{
        const f = e.target.files[0]; if(!f) return;
        Papa.parse(f, {header:true,skipEmptyLines:true,complete:function(res){
          segData = res.data.map(r=>({id: r.CustomerID||r.customerID||'', Recency: parseFloat(r.Recency||0)||0, Frequency: parseFloat(r.Frequency||0)||0, Monetary: parseFloat(r.Monetary||r.Spent||0)||0})).filter(x=>!isNaN(x.Recency));
          renderSeg(null);
        }});
      });

      function normalize(data, keys){
        const stats = {};
        keys.forEach(k=>{ const vals = data.map(d=>d[k]); const mean = vals.reduce((a,b)=>a+b,0)/vals.length; const std = Math.sqrt(vals.map(v=>Math.pow(v-mean,2)).reduce((a,b)=>a+b,0)/vals.length) || 1; stats[k]={mean,std}; });
        const norm = data.map(d=>{ const o={}; keys.forEach(k=>o[k] = (d[k]-stats[k].mean)/stats[k].std); o.id=d.id; return o; });
        return {norm,stats};
      }

      function kmeans(data, k, maxIter=60){
        const n = data.length; const dims = Object.keys(data[0]).filter(k=>k!=='id');
        let centroids = [];
        const used = new Set();
        while(centroids.length<k){ const idx = Math.floor(Math.random()*n); if(!used.has(idx)){ used.add(idx); centroids.push(Object.assign({}, data[idx])); } }
        let labels = new Array(n).fill(0);
        for(let it=0; it<maxIter; it++){
          // assign
          for(let i=0;i<n;i++){
            let best=0, bestd=Infinity;
            for(let j=0;j<k;j++){
              let d=0; dims.forEach(dim=> d += Math.pow(data[i][dim] - centroids[j][dim],2));
              if(d<bestd){bestd=d;best=j;}
            }
            labels[i]=best;
          }
          // recompute
          const sums = Array.from({length:k}, ()=> { const o={}; dims.forEach(d=>o[d]=0); o.count=0; return o; });
          for(let i=0;i<n;i++){ const lbl=labels[i]; dims.forEach(d=> sums[lbl][d]+=data[i][d]); sums[lbl].count++; }
          for(let j=0;j<k;j++) if(sums[j].count>0) dims.forEach(d=> centroids[j][d] = sums[j][d]/sums[j].count);
        }
        return {labels,centroids};
      }

      function renderSeg(clusters){
        if(!segData.length) return;
        const keys = ['Recency','Frequency','Monetary'];
        const {norm} = normalize(segData, keys);
        const pts = norm.map((d,i)=>({x:d.Recency,y:d.Monetary,label:segData[i].id, cluster: clusters ? clusters.labels[i] : null}));
        const datasets = [];
        if(clusters){
          const k=clusters.centroids.length; const palette=['#0b64c6','#2e7d32','#c62828','#6a1b9a','#ef6c00'];
          for(let j=0;j<k;j++){
            datasets.push({label:'Cluster '+(j+1),data:pts.filter(p=>p.cluster===j).map(p=>({x:p.x,y:p.y,r:4})),backgroundColor:palette[j%palette.length]});
          }
        } else {
          datasets.push({label:'Data',data:pts.map(p=>({x:p.x,y:p.y,r:4})),backgroundColor:'rgba(11,100,198,0.85)'});
        }
        const ctx = document.getElementById('segChart').getContext('2d');
        if(segChart) segChart.destroy();
        segChart = new Chart(ctx,{type:'bubble',data:{datasets},options:{responsive:true,plugins:{legend:{position:'bottom'}}}});
      }

      document.getElementById('segBtn') && document.getElementById('segBtn').addEventListener('click', ()=>{
        const k = parseInt(document.getElementById('kClusters').value)||3;
        if(!segData.length) return alert('Upload CSV: CustomerID,Recency,Frequency,Monetary');
        const keys=['Recency','Frequency','Monetary'];
        const {norm} = normalize(segData, keys);
        const input = norm.map(d=>({Recency:d.Recency, Frequency:d.Frequency, Monetary:d.Monetary, id:d.id}));
        const clusters = kmeans(input, k);
        renderSeg(clusters);
      });
    })();

    // ---------- Fraud detection ----------
    (function(){
      let fraudData = [];
      document.getElementById('fraudFile') && document.getElementById('fraudFile').addEventListener('change', (e)=>{
        const f = e.target.files[0]; if(!f) return;
        Papa.parse(f, {header:true,skipEmptyLines:true,complete:function(res){
          fraudData = res.data.map((r,i)=>({idx:i,Date:new Date(r.Date), Merchant: r.Merchant||'', Amount: parseFloat(r.Amount||r.amount||0)||0, Description: r.Description||''})).filter(d=>!isNaN(d.Date));
          renderFraud();
        }});
      });

      function renderFraud(anoms){
        const ctx = document.getElementById('fraudChart').getContext('2d');
        const labels = fraudData.map(d=>d.Date.toISOString().slice(0,10));
        const data = fraudData.map(d=>d.Amount);
        const anomalyIndices = anoms ? anoms.map(a=>a.idx) : [];
        const dataset = {label:'Amount',data:data,pointBackgroundColor:data.map((_,i)=> anomalyIndices.includes(i)?'red':'rgba(11,100,198,0.85)'),fill:false};
        if(window.fraudChart) window.fraudChart.destroy();
        window.fraudChart = new Chart(ctx,{type:'line',data:{labels, datasets:[dataset]},options:{responsive:true,plugins:{legend:{position:'bottom'}}}});
      }

      document.getElementById('fraudBtn') && document.getElementById('fraudBtn').addEventListener('click', ()=>{
        if(!fraudData.length) return alert('Upload CSV: Date,Amount');
        const zT = parseFloat(document.getElementById('zThresh').value)||3;
        const amounts = fraudData.map(d=>d.Amount);
        const mean = amounts.reduce((a,b)=>a+b,0)/amounts.length;
        const std = Math.sqrt(amounts.map(x=>Math.pow(x-mean,2)).reduce((a,b)=>a+b,0)/amounts.length) || 1;
        const anoms = fraudData.filter(d=> Math.abs((d.Amount-mean)/std) >= zT );
        const list = document.getElementById('fraudList');
        list.innerHTML = anoms.slice(0,50).map(a=>`<div style="padding:.35rem;border-bottom:1px solid #eee"><b>${a.Merchant||'Unknown'}</b> ${a.Date.toISOString().slice(0,10)} — $${a.Amount.toFixed(2)}</div>`).join('') || '<div class="muted">No anomalies found</div>';
        renderFraud(anoms);
      });
    })();

    // ---------- Resume classifier (keyword baseline) ----------
    (function(){
      const buckets = {
        'Data Scientist': ['pandas','numpy','scikit','sql','tableau','matplotlib','seaborn','regression','classification'],
        'ML Engineer': ['tensorflow','pytorch','keras','deploy','onnx','model','inference','gpu'],
        'Embedded/Instrumentation': ['microcontroller','esp32','arduino','c++','firmware','plc','scada','sensor']
      };
      document.getElementById('classifyBtn') && document.getElementById('classifyBtn').addEventListener('click', ()=>{
        const text = (document.getElementById('resumeText').value||'').toLowerCase();
        if(!text) return alert('Paste resume text');
        const scores = {};
        for(const b in buckets){ scores[b]=0; buckets[b].forEach(k=>{ if(text.includes(k)) scores[b]+=1; }) }
        const sorted = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
        const out = document.getElementById('resumeOut');
        out.innerHTML = `<div><b>Top match:</b> ${sorted[0][0]} (score ${sorted[0][1]})</div><pre style="background:#07102a;color:#fff;padding:.5rem;border-radius:6px;margin-top:.6rem">${JSON.stringify(scores,null,2)}</pre>`;
      });
    })();

    // ---------- Time-series anomaly ----------
    (function(){
      let tsData = [];
      document.getElementById('tsFile') && document.getElementById('tsFile').addEventListener('change', (e)=>{
        const f = e.target.files[0]; if(!f) return;
        Papa.parse(f, {header:true,skipEmptyLines:true,complete:function(res){
          tsData = res.data.map(r=>({Date: new Date(r.Date), Value: parseFloat(r.Value||r.value||0)})).filter(d=>!isNaN(d.Date) && !isNaN(d.Value));
          renderTS(null);
        }});
      });

      function renderTS(anoms){
        const ctx = document.getElementById('tsChart').getContext('2d');
        const labels = tsData.map(d=>d.Date.toISOString().slice(0,10));
        const values = tsData.map(d=>d.Value);
        const anomIdx = anoms?anoms.map(a=>a.idx):[];
        const dataset = {label:'Value',data:values,pointBackgroundColor:values.map((_,i)=>anomIdx.includes(i)?'red':'rgba(11,100,198,0.85)'),fill:false};
        if(window.tsChart) window.tsChart.destroy();
        window.tsChart = new Chart(ctx,{type:'line',data:{labels,datasets:[dataset]},options:{responsive:true,plugins:{legend:{position:'bottom'}}}});
      }

      document.getElementById('tsBtn') && document.getElementById('tsBtn').addEventListener('click', ()=>{
        if(!tsData.length) return alert('Upload CSV: Date,Value');
        const w = parseInt(document.getElementById('tsWindow').value)||30;
        const zt = parseFloat(document.getElementById('tsZ').value)||3;
        const values = tsData.map(d=>d.Value);
        const anoms = [];
        for(let i=w;i<values.length;i++){
          const window = values.slice(i-w,i);
          const mean = window.reduce((a,b)=>a+b,0)/window.length;
          const std = Math.sqrt(window.map(x=>Math.pow(x-mean,2)).reduce((a,b)=>a+b,0)/window.length) || 1;
          const z = Math.abs((values[i]-mean)/std);
          if(z>=zt) anoms.push({idx:i,Date:tsData[i].Date,Value:values[i],z});
        }
        const list = document.getElementById('tsList');
        list.innerHTML = anoms.slice(0,100).map(a=>`<div style="padding:.35rem;border-bottom:1px solid #eee">${a.Date.toISOString().slice(0,10)} — ${a.Value} (z=${a.z.toFixed(2)})</div>`).join('') || '<div class="muted">No anomalies found</div>';
        renderTS(anoms);
      });
    })();

    // ---------- RL Tank (same compact Q-learning visual) ----------
    (function(){
      const canvas = document.getElementById('tankCanvas'); const ctx = canvas.getContext('2d');
      function resizeCanvas(){ if(!canvas) return; canvas.width = canvas.clientWidth; canvas.height = 220; }
      window.addEventListener('resize', resizeCanvas); resizeCanvas();
      function drawTank(level){ if(!ctx) return; ctx.clearRect(0,0,canvas.width,canvas.height); const w=canvas.width-40; const h=canvas.height-40; ctx.strokeStyle='#333'; ctx.strokeRect(20,20,w,h); const fillH = (level/10)*h; ctx.fillStyle='rgba(50,120,200,0.6)'; ctx.fillRect(20,20+h-fillH,w,fillH); ctx.fillStyle='#111'; ctx.font='14px Arial'; ctx.fillText('Level: '+level.toFixed(2),30,15); }
      let rewardChart = null;
      function updateRewardChart(series){ const ctxR = document.getElementById('rewardChart').getContext('2d'); if(rewardChart){ rewardChart.data.labels = series.map((_,i)=>i+1); rewardChart.data.datasets[0].data = series; rewardChart.update(); } else { rewardChart = new Chart(ctxR,{type:'line',data:{labels:series.map((_,i)=>i+1),datasets:[{label:'Episode reward',data:series,fill:false}]},options:{responsive:true}}); } }

      function policyLevel(Q){ let level=5; for(let t=0;t<30;t++){ const s=Math.round(level); const a = Q[s].indexOf(Math.max(...Q[s])); level += [-1,0,1][a]; level = Math.max(0,Math.min(10,level)); } return level; }

      document.getElementById('trainBtn') && document.getElementById('trainBtn').addEventListener('click', ()=>{
        const episodes = parseInt(document.getElementById('episodes').value)||200; const alpha = parseFloat(document.getElementById('alpha').value)||0.1; const gamma = parseFloat(document.getElementById('gamma').value)||0.95; let epsilon = parseFloat(document.getElementById('epsilon').value)||0.2;
        const states = 11; const actions = [-1,0,1]; const Q = Array.from({length:states}, ()=>Array(actions.length).fill(0)); const target = 6.0;
        function reward(level){ return -Math.abs(level-target); }
        function runEpisode(){ let state = Math.floor(Math.random()*states); let totalR=0; for(let t=0;t<50;t++){ let a; if(Math.random()<epsilon) a = Math.floor(Math.random()*actions.length); else { a = Q[state].indexOf(Math.max(...Q[state])); if(a<0) a=0; } let level = state; level += actions[a]; level = Math.max(0,Math.min(10,level)); const r = reward(level); totalR += r; const ns = Math.round(level); const bestNext = Math.max(...Q[ns]); Q[state][a] = Q[state][a] + alpha*(r + gamma*bestNext - Q[state][a]); state = ns; } return totalR; }
        const rewards = []; let i=0;
        function step(){ if(i>=episodes){ updateRewardChart(rewards); return; } const r = runEpisode(); rewards.push(r); epsilon = Math.max(0.01, epsilon*0.995); drawTank(policyLevel(Q)); updateRewardChart(rewards); i++; requestAnimationFrame(step); }
        step();
      });

      drawTank(5);
    })();

    // close modals on Escape
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ document.querySelectorAll('.modal.open').forEach(m=>m.classList.remove('open')); } });
  </script>
</body>
</html>
